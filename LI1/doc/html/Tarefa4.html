<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa4</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Daniel Furtado &lt;a97327@alunos.uminho.pt&gt;;<br />Gabriela Cunha &lt;a97393@alunos.uminho.pt&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa4</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o</h1><p>Na primeira tarefa da 2&#170; fase do trabalho, foi-nos proposto fazer com que o jogo reagisse &#224; passagem do tempo com ajuda da biblioteca <strong><em>NCurses</em></strong>.</p><h1>Objetivos e estrat&#233;gias </h1><p>No in&#237;cio da tarefa procuramos entender primeiramente o que era pretendido no enunciado e conhecer os novos conceitos de step, delay, delta, pois foi algo com que nunca trabalhamos previamente.</p><p>Assim, come&#231;amos por desenvolver as 4 fun&#231;&#245;es presentes no m&#243;dulo <em>Main</em> e as altera&#231;&#245;es relativas &#224; Tarefa 2, pois neste momento passamos a trabalhar j&#225; com o tempo relativo ao modo Mega.</p><p>Depois de conclu&#237;rmos as fun&#231;&#245;es do <em>Main</em>, fizemos a fun&#231;&#227;o <strong>switchMouth</strong> e apic&#225;mo-la na Tarefa 2, pois o Pacman deve alternar a sua boca entre <em>Open</em> e <em>Closed</em> por cada step.</p><p>Em seguida, alteramos a nossa fun&#231;&#227;o da Tarefa 2 relativa ao modo Mega do Pacman e acabamos por dividi-la em 2 partes: a <strong>megaPacg</strong> que explica o comportamento dos ghosts face ao modo Mega e a <strong>megaPacp</strong> que explica o comportamento do pacman.</p><p>Foi estabelecido que o tempoMega durava 10s e que o delay default era de 0,25s . </p><p>Assim, tivemos de estabelecer na fun&#231;&#227;o <strong>megaPacp</strong> quando o fantasma devia voltar ao modo <em>Normal</em>, sendo que o tempoMega come&#231;ava nos 10s e em cada step perdia 0,25s dos 10s.</p><p>Quando chegamos ao fim de todas estas altera&#231;&#245;es, come&#231;amos a trabalhar na fun&#231;&#227;o principal desta tarefa,<strong>passTime</strong> e come&#231;amos apenas por criar uma fun&#231;&#227;o auxiliar para atualizar os <em>states</em> com as jogadas do pacman.</p><p>Conseguimos testar a fun&#231;&#227;o no Main e corrigimos alguns bugs na fun&#231;&#227;o <strong>updateControlledPlayer</strong> no <em>Main</em> (se mantivessemos a tecla premida o pacman andava mais r&#225;pido e t&#237;nhamos de clicar sempre na tecla para que ele se movesse).</p><p>A&#237; percebemos que os fantasmas continuavam no mesmo s&#237;tio pois ainda n&#227;o t&#237;nhamos gerado uma <strong>play</strong> relativa a eles e focamo-nos na Tarefa5, relativa ao movimentos dos ghosts.</p><p>Mais tarde, come&#231;amos a juntar as fun&#231;&#245;es da Tarefa5 a esta tarefa e atualizamos a nossa fun&#231;&#227;o auxiliar para <strong><code><a href="Tarefa4.html#v:univPlay" title="Tarefa4">univPlay</a></code></strong> , uma fun&#231;&#227;o universal pois passou a efetuar tamb&#233;m jogadas dos ghosts e come&#231;ou a utilizar os <strong><em>steps</em></strong> e a atualizar os <strong><em>states</em></strong> do jogo, isto &#233;, come&#231;ou a englobar tudo.</p><p>J&#225; na Tarefa6, voltamos a dar um update nesta Tarefa4 pois quer&#237;amos testar o <em>bot</em>, e deixamos em coment&#225;rio uma op&#231;&#227;o das 2 fun&#231;&#245;es de modo a testar o <strong>bot</strong>.</p><h1>Conclus&#227;o</h1><p>Esta tarefa, apesar de n&#227;o ter muito c&#243;digo no ficheiro, foi uma tarefa bastante complicada e trabalhosa, visto que trabalha com v&#225;rias tarefas (T2, T5 e ainda T6).</p><p>Foi tamb&#233;m atrav&#233;s desta tarefa que detetamos v&#225;rios erros em tarefas anteriores e tamb&#233;m nas seguintes.</p><p>Conclu&#237;ndo, foi uma tarefa que exigiu muita aten&#231;&#227;o precisamente por termos de mexer com outras tarefas.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:defaultDelayTime">defaultDelayTime</a> :: Integer</li><li class="src short"><a href="#v:univPlay">univPlay</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Play" title="Types">Play</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:idghost">idghost</a> :: [<a href="Types.html#t:Play" title="Types">Play</a>] -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:passTime">passTime</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:defaultDelayTime" class="def">defaultDelayTime</a> :: Integer <a href="#v:defaultDelayTime" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:univPlay" class="def">univPlay</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Play" title="Types">Play</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:univPlay" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar que determina se o Player deve atualizar a sua posi&#231;&#227;o de acordo com o Step e com o seu modo.</p></div></div><div class="top"><p class="src"><a id="v:idghost" class="def">idghost</a> :: [<a href="Types.html#t:Play" title="Types">Play</a>] -&gt; Int -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:idghost" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que apenas retorna a jogada do Ghost com o id correspondente. </p></div></div><div class="top"><p class="src"><a id="v:passTime" class="def">passTime</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTime" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o final que altera o State do jogo.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>