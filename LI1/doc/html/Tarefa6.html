<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa6</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Daniel Furtado &lt;a97327@alunos.uminho.pt&gt;;<br />Gabriela Cunha &lt;a97393@alunos.uminho.pt&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa6</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o</h1><p>Na Tarefa 6, foi-nos atribu&#237;do fazer um <strong>Bot</strong> que conseguisse jogar Pacman automaticamente.</p><p>Ao longo do jogo o Bot vai reagir de maneiras diferentes dependendo do seu modo e tamb&#233;m de v&#225;rios aspetos.</p><h1>Objetivos</h1><p>No in&#237;cio desta tarefa debatemos sobre como ir&#237;amos interpretar o enunciado e escolher a melhor forma para que o Pacman conseguisse completar o jogo ainda vivo.</p><p>Ponderamos criar um bot mais primitivo em que apenas fugia. No entanto, desse modo, o jogo ficava demasiado simples, n&#227;o tendo assim muita diversidade de jogadas e decis&#245;es.</p><p>Ent&#227;o tentamos fazer um Bot com um pouco mais de complexidade.</p><p>Para conseguir organizar a tarefa dividimo-la em partes:</p><ul><li>Quando o Bot est&#225; em modo Mega, onde vai perseguir os Ghosts que estavam apenas no modo Dead.</li><li>Quando o Bot n&#227;o possui nenhum Ghost por perto, podendo assim &quot;ca&#231;ar&quot; as pe&#231;as, nomeadamente &quot;comida&quot;, e assim ganhar pontos e tamb&#233;m ter uma maior diversidade de jogadas.</li><li>Quando um Ghost se aproxima do Bot, ele deve ter como seu principal objetivo &quot;fugir&quot; do Ghost mais pr&#243;ximo e assim continuar no jogo.</li><li>&#218;ltima parte, juntar as duas fun&#231;&#245;es.</li></ul><h1>Decis&#245;es</h1><p>Na primeira fase criamos a fun&#231;&#227;o <strong><code><a href="Tarefa6.html#v:catchGhost" title="Tarefa6">catchGhost</a></code></strong> que faz com que o Bot persiga os Ghosts.</p><ul><li>O nosso Bot apenas ir&#225; perseguir os Ghosts que est&#227;o no modo Dead, atrav&#233;s da fun&#231;&#227;o <strong><code><a href="Tarefa6.html#v:allDead" title="Tarefa6">allDead</a></code></strong>.</li><li>Ent&#227;o o Bot ir&#225; comparar a sua posi&#231;&#227;o com a do Ghost.</li><li>Caso o Ghost esteja &#224; sua direita e se n&#227;o houver nenhuma <strong><em>Wall</em></strong> &#225; sua direita, ele ir&#225; movimentar-se para a direita, tentando assim obter a mesma coordenada que o Ghost.</li><li>O mesmo acontece quando o Ghost est&#225; &#224; sua esquerda, caso n&#227;o tenha nenhuma parede &#224; sua esquerda ent&#227;o ele ir&#225; mover-se para a esquerda.</li><li>No entanto se tiver uma <strong><em>Wall</em></strong> na coordenada para a qual o Bot se pretende mover ent&#227;o ele averiguar&#225; se o Ghost est&#225; acima ou abaixo.</li><li>Dependendo da situa&#231;&#227;o, estando o Ghost acima ent&#227;o ele ir&#225; mover-se para cima n&#227;o tendo nenhuma <strong><em>Wall</em></strong> em cima, isto &#233;, ele mover-se-&#225; para cima quando a coordenada em cima esteja livre.</li><li>Por outro lado quando o Ghost est&#225; em baixo ele ir&#225; movimentar-se para baixo se na coordenada em baixo n&#227;o esteja uma <strong><em>Wall</em></strong>.</li><li>Em ambas as situa&#231;&#245;es caso haja uma parede ent&#227;o ele ter&#225; que optar por tomar a dire&#231;&#227;o contr&#225;ria, ou seja, se estiver uma <strong><em>Wall</em></strong> em cima ir&#225; para baixo, caso haja uma <strong><em>Wall</em></strong> em baixo ent&#227;o o Bot ir&#225; para cima.</li><li>Quando o Bot conseguir atingir a mesma coordenada dos y's ent&#227;o ir&#225; procurar obter a mesma coordenada dos x's do Ghost, movimentando-se para cima ou para baixo, dependendo da posi&#231;&#227;o do Ghost.</li></ul><p>Na fase seguindo optamos por criar uma fun&#231;&#227;o a <strong><code><a href="Tarefa6.html#v:escapeGhost" title="Tarefa6">escapeGhost</a></code></strong> que recebe apenas Ghosts no modo Alive, onde o Bot, dependendo da sua dist&#226;ncia ao Ghost mais pr&#243;ximo, ir&#225; averiguar se pode procurar pela &quot;comida&quot; mais pr&#243;xima ou fugir do Ghost.</p><ul><li>O nosso Bot ir&#225; procurar pela comida mais pr&#243;xima caso o Ghost esteja a uma dist&#226;ncia radial de <strong>6</strong>, ou seja, se o Ghost estiver distante do Bot, ele pode procurar a comida mais pr&#243;xima com a ajuda da fun&#231;&#227;o <code>__proxFood'__</code>.</li><li>Caso a comida esteja &#225; sua direita e n&#227;o haja <strong><em>Wall</em></strong> ir&#225; mover-se para a direita. O mesmo acontece se a comida estiver &#224; esquerda, ele mover-se-&#225; para a esquerda.</li><li>Se tiver uma <strong><em>Wall</em></strong> na dire&#231;&#227;o na qual o Bot se move quando procura comida, se a comida estiver acima e n&#227;o houver uma <strong><em>Wall</em></strong> acima move-se para cima, sen&#227;o move-se para baixo.</li><li>O mesmo acontece quando a comida est&#225; para baixo, se n&#227;o estiver uma <strong><em>Wall</em></strong> ele move-se para baixo, por outro lado ter&#225; que se mover para cima.</li></ul><p>Na terceira fase da Tarefa decidimos colocar quando o Pacman ter&#225; que &quot;fugir&quot; dos Ghosts, visto que este m&#233;todo de procura est&#225; bastante relacionado com a dist&#226;ncia do Bot ao Ghost mais pr&#243;ximo.</p><ul><li>Do mesmo modo que o Bot faz para ca&#231;ar o Ghost, neste caso ele faz o contr&#225;rio.</li><li>Caso o Bot esteja mais para a direita ent&#227;o ir&#225; mover-se para a direita at&#233; bater contra uma <strong><em>Wall</em></strong>.</li><li>Quando colidir com a <strong><em>Wall</em></strong> ir&#225; determinar se o Ghost est&#225; mais acima ou abaixo e ir&#225; decidir conforme a sua posi&#231;&#227;o. Se o Ghost estiver em cima, mover-se-&#225; para baixo, caso contr&#225;rio mover-se-&#225; para cima.</li><li>Quando colide com uma <strong><em>Wall</em></strong> em baixo ou em cima ir&#225; tamb&#233;m determinar se o Ghost est&#225; mais &#224; esquerda ou direita.</li><li>Quando estiver na situa&#231;&#227;o acima e o Ghost estiver mais &#224; esquerda ent&#227;o move-se para a direita, sen&#227;o move-se para a esquerda.</li><li>Uma estrat&#233;gia para tornar o jogo mais interativo e divertido, foi colocar o Bot a passar no t&#250;nel quando est&#225; a uma dist&#226;ncia inferior a <strong>5</strong> do Ghost mais pr&#243;ximo.</li></ul><p>Na &#250;ltima parte do Trabalho decidimos juntar as fun&#231;&#245;es <strong><code><a href="Tarefa6.html#v:escapeGhost-39-" title="Tarefa6">escapeGhost'</a></code></strong> e <strong><code><a href="Tarefa6.html#v:catchGhost-39-" title="Tarefa6">catchGhost'</a></code></strong> utilizando-as alternadamente.</p><ul><li>Caso o Bot esteja em modo Mega utilizamos a fun&#231;&#227;o <code><a href="Tarefa6.html#v:catchGhost-39-" title="Tarefa6">catchGhost'</a></code>.</li><li>Por outro lado, se estiver em modo Normal utilizamos a fun&#231;&#227;o <code><a href="Tarefa6.html#v:escapeGhost-39-" title="Tarefa6">escapeGhost'</a></code> </li></ul><h1>Conclus&#227;o </h1><p>Nesta tarefa tivemos algumas dificuldades em escolher qual o melhor m&#233;todo a utilizar, visto que existem in&#250;meros m&#233;todos, uns melhores que os outros.</p><p>Na nossa situa&#231;&#227;o pensamos que o nosso m&#233;todo, apesar de n&#227;o ser o mais eficiente, consegue atingir os objetivos e jogar fluidamente.</p><p>Alguns dos nossos problemas nesta Tarefa tamb&#233;m passaram pela decis&#227;o que o Bot deve tomar quando est&#225; num canto, ou quando o Bot est&#225; no lado oposto ao Ghost.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:escapeGhost">escapeGhost</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:proxGhost">proxGhost</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:proxGhost-39-">proxGhost'</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:distancePac">distancePac</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Int</li><li class="src short"><a href="#v:distancePac-39-">distancePac'</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Float</li><li class="src short"><a href="#v:coordsFood">coordsFood</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>]</li><li class="src short"><a href="#v:coordsFood-39-">coordsFood'</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>]</li><li class="src short"><a href="#v:proxFood">proxFood</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:proxFood-39-">proxFood'</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:proxGhostO">proxGhostO</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:proxGhostO-39-">proxGhostO'</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:catchGhost">catchGhost</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:allDead">allDead</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool</li><li class="src short"><a href="#v:escapeGhost-39-">escapeGhost'</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:catchGhost-39-">catchGhost'</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:bot-39-">bot'</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:bot">bot</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:escapeGhost" class="def">escapeGhost</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:escapeGhost" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o faz com que o bot consiga escapar dos Ghosts atribuindo jogadas dependendo do seu State.</p></div></div><div class="top"><p class="src"><a id="v:proxGhost" class="def">proxGhost</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:proxGhost" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o determina de uma lista de Players qual o Ghost mais pr&#243;ximo do Pacman dando as suas coordenadas.</p></div></div><div class="top"><p class="src"><a id="v:proxGhost-39-" class="def">proxGhost'</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:proxGhost-39-" class="selflink">#</a></p><div class="doc"><p>Chama a fun&#231;&#227;o proxGhost com a lista de Players ordenada.</p></div></div><div class="top"><p class="src"><a id="v:distancePac" class="def">distancePac</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Int <a href="#v:distancePac" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o calcula a dist&#226;ncia entre duas coordenadas ao quadrado.</p></div></div><div class="top"><p class="src"><a id="v:distancePac-39-" class="def">distancePac'</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Float <a href="#v:distancePac-39-" class="selflink">#</a></p><div class="doc"><p>Transforma o valor obtido na distancePac na dist&#226;ncia entre as duas coordenadas.</p></div></div><div class="top"><p class="src"><a id="v:coordsFood" class="def">coordsFood</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] <a href="#v:coordsFood" class="selflink">#</a></p><div class="doc"><p>Obt&#233;m uma lista com todas as coordenadas das comidas no Maze.</p></div></div><div class="top"><p class="src"><a id="v:coordsFood-39-" class="def">coordsFood'</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] <a href="#v:coordsFood-39-" class="selflink">#</a></p><div class="doc"><p>Utiliza o contador na fun&#231;&#227;o coordsFood. </p></div></div><div class="top"><p class="src"><a id="v:proxFood" class="def">proxFood</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Coords" title="Types">Coords</a>] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:proxFood" class="selflink">#</a></p><div class="doc"><p>Determina qual a coordenada mais pr&#243;xima do Pacman.</p></div></div><div class="top"><p class="src"><a id="v:proxFood-39-" class="def">proxFood'</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:proxFood-39-" class="selflink">#</a></p><div class="doc"><p>Obt&#233;m a coordenada de comida, mais pr&#243;xima do Pacman.</p></div></div><div class="top"><p class="src"><a id="v:proxGhostO" class="def">proxGhostO</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:proxGhostO" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o retorna a orienta&#231;&#227;o do Ghost mais pr&#243;ximo do Pacman.</p></div></div><div class="top"><p class="src"><a id="v:proxGhostO-39-" class="def">proxGhostO'</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:proxGhostO-39-" class="selflink">#</a></p><div class="doc"><p>Tem o mesmo resultado que a proxGhostO mas com a lista de Player ordenada.</p></div></div><div class="top"><p class="src"><a id="v:catchGhost" class="def">catchGhost</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:catchGhost" class="selflink">#</a></p><div class="doc"><p>Esta fun&#231;&#227;o faz com que o bot consiga perseguir os Ghosts atribuindo jogadas dependendo do seu State.</p></div></div><div class="top"><p class="src"><a id="v:allDead" class="def">allDead</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool <a href="#v:allDead" class="selflink">#</a></p><div class="doc"><p>Verifica se todos os Ghosts da lista est&#227;o em modo Dead.</p></div></div><div class="top"><p class="src"><a id="v:escapeGhost-39-" class="def">escapeGhost'</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:escapeGhost-39-" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o final na qual o Pacman foge dos Ghosts recebendo uma lista ordenada de Players no State.</p></div></div><div class="top"><p class="src"><a id="v:catchGhost-39-" class="def">catchGhost'</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:catchGhost-39-" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o final na qual o Pacman persegue os Ghosts recebendo uma lista ordenada de Players no State.</p></div></div><div class="top"><p class="src"><a id="v:bot-39-" class="def">bot'</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:bot-39-" class="selflink">#</a></p><div class="doc"><p>Aplica uma jogada ao bot dependendo do seu modo.</p></div></div><div class="top"><p class="src"><a id="v:bot" class="def">bot</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:bot" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o final do bot que recebe uma lista ordenada de Players no estado.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>