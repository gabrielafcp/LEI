<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa2</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Daniel Furtado &lt;a97327@alunos.uminho.pt&gt;;<br />Gabriela Cunha &lt;a97393@alunos.uminho.pt&gt;</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa2</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o</h1><p>Nesta tarefa foi-nos proposta a implementa&#231;&#227;o da fun&#231;&#227;o <strong><code><a href="Tarefa2.html#v:play" title="Tarefa2">play</a></code></strong> que faz as jogadas e move os jogadores.</p><h1>Objetivos e estrat&#233;gias</h1><p>Aplicamos uma fun&#231;&#227;o auxiliar para descobrir a pe&#231;a para onde o jogador se quer mover.</p><p>Assim pudemos especificar cada caso particular e casos mais gerais e l&#243;gicos como o facto de um jogador n&#227;o se poder mover para uma parede.</p><p>Em rela&#231;&#227;o aos casos particulares, especificamos os seguintes casos:</p><ul><li>Comportamento do pacman ao comer as comidas (Ganha 5 pontos se comer comida pequena e se comer comida grande 10 pontos e altera o modo para Mega);</li><li>Comportamento dos fantasmas quando o Pacman se encontra no modo Mega (devem reduzir a sua velocidade para metade da velocidade inicial e alterar o seu modo para Dead);</li><li>Comportamento do jogador quando se encontra numa pe&#231;a do t&#250;nel (deve-se mover para o lado oposto do corredor);</li><li>Ocorr&#234;ncias se o pacman colidir com um fantasma se estiver em modo Mega (o fantasma morre e renasce para o centro da casa dos fantasmas e o Pacman ganha 10 pontos ao comer o fantasma);</li><li>Substitui&#231;&#227;o das pe&#231;as por onde o pacman passa (as comidas devem desaparecer ap&#243;s o Pacman passar por elas).</li></ul><p>Na 1&#170; fase do trabalho limitamos a fun&#231;&#227;o final apenas para jogadas do pacman.</p><p>Com a 2&#170; fase do trabalho fizemos v&#225;rias altera&#231;&#245;es a esta tarefa, referidas no relat&#243;rio da T4 e da T5.</p><p>Com a experimenta&#231;&#227;o do jogo no Main percebemos tamb&#233;m que o pacman conseguia entrar dentro da casa dos fantasmas, o que n&#227;o era suposto, e acrescentamos essa restri&#231;&#227;o &#224; nossa fun&#231;&#227;o.</p><h1>Conclus&#227;o</h1><p>Ao concluir a fun&#231;&#227;o <strong><code><a href="Tarefa2.html#v:play" title="Tarefa2">play</a></code></strong>, apesar da tarefa compilar no terminal, os testes na codeboard fornecida n&#227;o coincidiam com o esperado e t&#237;nhamos ainda cerca de 10 erros em 13 poss&#237;veis da primeira vez que a testamos.</p><p>Estes in&#250;meros erros deviam-se ao facto de termos trocado as coordenadas, erro que corrijimos logo de seguida e reduzimos para apenas 3 erros.</p><p>Estes 3 erros foram mais dif&#237;ceis de identificar mas atingimos o nosso objetivo e conseguimos concluir a tarefa com sucesso, passando a todos os testes.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:pieceMaze">pieceMaze</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Piece" title="Types">Piece</a></li><li class="src short"><a href="#v:findpiece">findpiece</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Corridor" title="Types">Corridor</a> -&gt; <a href="Types.html#t:Piece" title="Types">Piece</a></li><li class="src short"><a href="#v:findcorr">findcorr</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Corridor" title="Types">Corridor</a></li><li class="src short"><a href="#v:movePacman">movePacman</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:moveGhost">moveGhost</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:megaPacg">megaPacg</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:megaPacp">megaPacp</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:switchMouth">switchMouth</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:posGhost">posGhost</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:posFood">posFood</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:posTunnel">posTunnel</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:replacePiece">replacePiece</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a></li><li class="src short"><a href="#v:ghostDie">ghostDie</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:getmiddlecoordsodd">getmiddlecoordsodd</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:getmiddlecoordseven">getmiddlecoordseven</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a></li><li class="src short"><a href="#v:ghosts">ghosts</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:pacman">pacman</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:moveGhosts">moveGhosts</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; Int -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:play">play</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:pieceMaze" class="def">pieceMaze</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Piece" title="Types">Piece</a> <a href="#v:pieceMaze" class="selflink">#</a></p><div class="doc"><p>Retorna a pe&#231;a respetiva &#224;s coordenadas dadas no Maze.</p><p>Esta fun&#231;&#227;o utiliza duas fun&#231;&#245;es auxiliares: <strong><code><a href="Tarefa2.html#v:findpiece" title="Tarefa2">findpiece</a></code></strong> and <strong><code><a href="Tarefa2.html#v:findcorr" title="Tarefa2">findcorr</a></code></strong>.</p></div></div><div class="top"><p class="src"><a id="v:findpiece" class="def">findpiece</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Corridor" title="Types">Corridor</a> -&gt; <a href="Types.html#t:Piece" title="Types">Piece</a> <a href="#v:findpiece" class="selflink">#</a></p><div class="doc"><p>Encontra a pe&#231;a respetiva &#224;s coordenadas dadas no corredor </p></div></div><div class="top"><p class="src"><a id="v:findcorr" class="def">findcorr</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Corridor" title="Types">Corridor</a> <a href="#v:findcorr" class="selflink">#</a></p><div class="doc"><p>Encontra o corredor no Maze com as coordenadas dadas</p></div></div><div class="top"><p class="src"><a id="v:movePacman" class="def">movePacman</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:movePacman" class="selflink">#</a></p><div class="doc"><p>Recebe um <em>Player</em>, uma <em>Orienta&#231;&#227;o</em> e um <em>Maze</em> e devolve o Pacman com a nova <em>Orienta&#231;&#227;o</em> ou com novas <em>Coordenadas</em>.</p><ul><li>Se a <em>Orienta&#231;&#227;o</em> dada &#233; a mesma que a do <em>Player</em> ent&#227;o avan&#231;a para a respetiva posi&#231;&#227;o.</li><li>Se a <em>Orienta&#231;&#227;o</em> dada &#233; diferente da sua ent&#227;o altera a sua <em>Orienta&#231;&#227;o</em>. </li><li><strong>ATEN&#199;&#194;O</strong> : Se existe uma _Wall_ na posi&#231;&#227;o que o <em>Player</em> pretende ir, n&#227;o se move.</li></ul></div></div><div class="top"><p class="src"><a id="v:moveGhost" class="def">moveGhost</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:moveGhost" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o recebe um <em>Player</em>, uma <em>Orienta&#231;&#227;o</em>, um <em>Maze</em> e devolve o <em>Ghost</em> com uma nova <em>Orienta&#231;&#227;o</em> ou novas  <em>Coordenadas</em>. </p></div></div><div class="top"><p class="src"><a id="v:megaPacg" class="def">megaPacg</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:megaPacg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:megaPacp" class="def">megaPacp</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:megaPacp" class="selflink">#</a></p><div class="doc"><p>Atualiza o tempo Mega se o Pacman est&#225; em modo Mega.</p></div></div><div class="top"><p class="src"><a id="v:switchMouth" class="def">switchMouth</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:switchMouth" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que muda o estado da boca do Pacman.</p></div></div><div class="top"><p class="src"><a id="v:posGhost" class="def">posGhost</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:posGhost" class="selflink">#</a></p><div class="doc"><p>Aplica as altera&#231;&#245;es quando o Pacman colide com um Ghost (mesmas <em>Coordenadas</em>).</p><ul><li>Quando o Pacman them mais de <strong>1 vida</strong> e o Ghost est&#225; em modo <strong>Alive</strong> o Pacman perde <strong>1</strong> vida. </li><li>Quando o Pacman tem <strong>0 vidas</strong> e o modo do Ghost &#233; <strong>Alive</strong> o Pacman muda o seu modo para <strong>Dying</strong>-</li></ul></div></div><div class="top"><p class="src"><a id="v:posFood" class="def">posFood</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:posFood" class="selflink">#</a></p><div class="doc"><p>Altera a pontua&#231;&#227;o do Pacman quando est&#225; nas mesmas <em>Coordenadas</em> que alguma <em>Food</em>.</p><ul><li>Quando o Pacman est&#225; nas mesmas <em>Coordenadas</em> que uma <strong>Food Little</strong> Pacman ganha <strong>1</strong> ponto.</li><li>Quando o Pacman est&#225; nas mesmas <em>Coordenadas</em> que uma <strong>Food Big</strong> ganha <strong>5</strong> pontos. </li></ul><p>Esta fun&#231;&#227;o usa a fun&#231;&#227;o: <strong><code><a href="Tarefa2.html#v:pieceMaze" title="Tarefa2">pieceMaze</a></code></strong></p></div></div><div class="top"><p class="src"><a id="v:posTunnel" class="def">posTunnel</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:posTunnel" class="selflink">#</a></p><div class="doc"><p>Move o Pacman para o outro lado do tunel quando entra no lado contr&#225;rio no tunel.</p></div></div><div class="top"><p class="src"><a id="v:replacePiece" class="def">replacePiece</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> <a href="#v:replacePiece" class="selflink">#</a></p><div class="doc"><p>Substitui a comida, quando o Pacman tem as mesmas <em>Coordenadas</em> que a comida, por um espa&#231;o.</p><p>Esta fun&#231;&#227;o usa 2 auxiliares fun&#231;&#245;es: <strong><code><a href="Tarefa2.html#v:pieceMaze" title="Tarefa2">pieceMaze</a></code></strong> e <strong><code><a href="Types.html#v:replaceElemInMaze" title="Types">replaceElemInMaze</a></code></strong>.</p></div></div><div class="top"><p class="src"><a id="v:ghostDie" class="def">ghostDie</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:ghostDie" class="selflink">#</a></p><div class="doc"><p>Descreve para onde os Ghosts v&#227;o ap&#243;s serem comidos pelo Pacman.</p><ul><li>Se o Ghost estiver no modo Dead ent&#227;o ele vai para a casa dos Fantasmas.</li><li>A casa varia caso a altura seja par ou &#237;mpar.</li></ul><p>Esta fun&#231;&#227;o usa 2 auxiliares fun&#231;&#245;es: <strong><code><a href="Tarefa2.html#v:getmiddlecoordsodd" title="Tarefa2">getmiddlecoordsodd</a></code></strong> e <strong><code><a href="Tarefa2.html#v:getmiddlecoordseven" title="Tarefa2">getmiddlecoordseven</a></code></strong>.</p></div></div><div class="top"><p class="src"><a id="v:getmiddlecoordsodd" class="def">getmiddlecoordsodd</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:getmiddlecoordsodd" class="selflink">#</a></p><div class="doc"><p>Encontra onde &#233; o meio do Maze quando a altura do Maze &#233; <strong>&#237;mpar</strong>.</p></div></div><div class="top"><p class="src"><a id="v:getmiddlecoordseven" class="def">getmiddlecoordseven</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> <a href="#v:getmiddlecoordseven" class="selflink">#</a></p><div class="doc"><p>Encontra onde se situa o meio do Maze quando a altura &#233; <strong>par</strong>. </p></div></div><div class="top"><p class="src"><a id="v:ghosts" class="def">ghosts</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:ghosts" class="selflink">#</a></p><div class="doc"><p>Re&#250;ne todos os Ghosts da lista de Players.</p></div></div><div class="top"><p class="src"><a id="v:pacman" class="def">pacman</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:pacman" class="selflink">#</a></p><div class="doc"><p>Encontra o Pacman na lista de jogadores.</p></div></div><div class="top"><p class="src"><a id="v:moveGhosts" class="def">moveGhosts</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; Int -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:moveGhosts" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que recebe um id do Ghost e a lista de Players e apenas move o Ghost com o respetivo id. </p></div></div><div class="top"><p class="src"><a id="v:play" class="def">play</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:play" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o principal que aplica uma <strong>Play</strong> dado um <strong>Move</strong> e um <strong>State</strong>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>